<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#2563eb">
  <link rel="manifest" href="manifest.json?v=20260222i">
  <link rel="apple-touch-icon" href="icons/icon-192x192.png">
  <title>GeoWeb Kaffrine</title>

  <link rel="stylesheet" href="css/leaflet.css?v=20260222i">
  <link rel="stylesheet" href="css/leaflet-measure.css?v=20260222i">

  <link rel="stylesheet" href="css/base.css?v=20260222i">
  <link rel="stylesheet" href="css/layout.css?v=20260222i">
  <link rel="stylesheet" href="css/navbar.css?v=20260222i">
  <link rel="stylesheet" href="css/mobile.css?v=20260222i">
  <link rel="stylesheet" href="css/theme.css?v=20260222i">
</head>
<body>
  <div id="app">
    <div class="ambient-bg" aria-hidden="true"></div>

    <header class="navbar" role="banner">
      <div class="brand" id="brandHome" role="button" tabindex="0" aria-label="Retour accueil">
        <span class="brand-logo" aria-hidden="true">GK</span>
        <div class="brand-copy">
          <span class="brand-text">GeoWeb Kaffrine</span>
          <span class="brand-subtext">Centre de commande spatial</span>
        </div>
      </div>

      <nav class="desktop-nav" aria-label="Navigation principale">
        <ul class="nav-menu">
          <li class="nav-item dropdown">
            <button class="nav-btn dropdown-toggle" type="button" aria-expanded="false">&#x1F9ED; Navigation</button>
            <div class="dropdown-menu" role="menu">
              <button type="button" class="menu-action" data-action="home">&#x1F3E0; Accueil</button>
              <button type="button" class="menu-action" data-action="dashboard">&#x1F5A5;&#xFE0F; Centre de commande</button>
              <button type="button" class="menu-action" data-action="metadata">&#x2139;&#xFE0F; Metadonnées</button>
            </div>
          </li>
          <li class="nav-item dropdown">
            <button class="nav-btn dropdown-toggle" type="button" aria-expanded="false">&#x1F5C2;&#xFE0F; Données</button>
            <div class="dropdown-menu" role="menu">
              <button type="button" class="menu-action" data-action="layers">&#x1F9F1; Couches</button>
              <button type="button" class="menu-action" data-action="legend">&#x1F5FA;&#xFE0F; Légende</button>
              <button type="button" class="menu-action" data-action="download">&#x2B07;&#xFE0F; Télécharger</button>
            </div>
          </li>
          <li class="nav-item dropdown">
            <button class="nav-btn dropdown-toggle" type="button" aria-expanded="false">&#x1F4CA; Analyse</button>
            <div class="dropdown-menu" role="menu">
              <button type="button" class="menu-action" data-action="analysis">&#x1F6F0;&#xFE0F; Analyse spatiale</button>
              <button type="button" class="menu-action" data-action="analysis-modal">&#x1F3AF; Analyse avancée</button>
              <button type="button" class="menu-action" data-action="routing">&#x1F6E3;&#xFE0F; Itinéraire</button>
              <button type="button" class="menu-action" data-action="measure">&#x1F4CF; Mesure</button>
            </div>
          </li>
          <li class="nav-item dropdown">
            <button class="nav-btn dropdown-toggle" type="button" aria-expanded="false">&#x1F441;&#xFE0F; Affichage</button>
            <div class="dropdown-menu" role="menu">
              <button type="button" class="menu-action" data-action="basemap-osm">&#x1F30D; Fond OSM</button>
              <button type="button" class="menu-action" data-action="basemap-hybrid">&#x1F5FA;&#xFE0F; Fond hybride</button>
              <button type="button" class="menu-action" data-action="basemap-dark">&#x1F311; Fond sombre</button>
              <button type="button" class="menu-action" data-action="zoom-in">&#x2795; Zoom +</button>
              <button type="button" class="menu-action" data-action="zoom-out">&#x2796; Zoom -</button>
              <button type="button" class="menu-action" data-action="full-extent">&#x1F504; Actualiser la page</button>
            </div>
          </li>
        </ul>
      </nav>

      <button id="mobileMenuToggle" class="icon-btn menu-toggle" type="button" aria-label="Ouvrir menu mobile" aria-expanded="false">&#9776;</button>
      <button id="themeToggle" class="icon-btn" type="button" aria-label="Basculer le thème">Thème</button>
      <button id="installButton" class="icon-btn" type="button" aria-label="Installer application">Installer</button>
    </header>

    <aside id="mobileMenu" class="mobile-menu" aria-label="Menu mobile">
      <button type="button" class="menu-action" data-action="home">&#x1F3E0; Accueil</button>
      <button type="button" class="menu-action" data-action="dashboard">&#x1F5A5;&#xFE0F; Centre de commande</button>
      <button type="button" class="menu-action" data-action="layers">&#x1F9F1; Couches</button>
      <button type="button" class="menu-action" data-action="legend">&#x1F5FA;&#xFE0F; Légende</button>
      <button type="button" class="menu-action" data-action="analysis">&#x1F6F0;&#xFE0F; Analyse</button>
      <button type="button" class="menu-action" data-action="analysis-modal">&#x1F3AF; Analyse avancée</button>
      <button type="button" class="menu-action" data-action="routing">&#x1F6E3;&#xFE0F; Itinéraire</button>
      <button type="button" class="menu-action" data-action="measure">&#x1F4CF; Mesure</button>
      <button type="button" class="menu-action" data-action="download">&#x2B07;&#xFE0F; Télécharger</button>
      <button type="button" class="menu-action" data-action="install">&#x1F4F2; Installer</button>
      <button type="button" class="menu-action" data-action="metadata">&#x2139;&#xFE0F; Metadonnées</button>
    </aside>

    <main class="map-shell">
      <div id="map" aria-label="Carte interactive"></div>
    </main>

    <section id="dashboardPanel" class="dashboard" aria-label="Tableau de bord">
      <div class="dashboard-head">
        <h2>Centre de commande</h2>
        <button type="button" class="icon-btn panel-close" data-close-panel="dashboardPanel" aria-label="Fermer le centre de commande">x</button>
      </div>
      <div class="dashboard-grid">
        <article class="kpi-card">
          <h3>Entités actives</h3>
          <p id="kpiFeatures">0</p>
        </article>
        <article class="kpi-card">
          <h3>Couches actives</h3>
          <p id="kpiLayers">0</p>
        </article>
        <article class="kpi-card">
          <h3>Zoom</h3>
          <p id="kpiZoom">-</p>
        </article>
        <article class="kpi-card">
          <h3>Thème</h3>
          <p id="kpiTheme">Clair</p>
        </article>
      </div>
      <div class="activity-feed">
        <h3>Activité récente</h3>
        <ul id="activityList"></ul>
      </div>
    </section>

    <div class="bottom-bar">
      <span id="statusText">Prêt</span>
      <span id="scaleText">Échelle: -</span>
      <span id="networkText">En ligne</span>
    </div>

    <div class="data-quick-bar" aria-label="Accès rapide données">
      <button type="button" class="quick-btn menu-action" data-action="layers" aria-label="Couches" title="Couches">&#x1F9F1;</button>
      <button type="button" class="quick-btn menu-action" data-action="legend" aria-label="Légende" title="Légende">&#x1F5FA;&#xFE0F;</button>
      <button type="button" class="quick-btn menu-action" data-action="download" aria-label="Télécharger" title="Télécharger">&#x2B07;&#xFE0F;</button>
    </div>

    <aside id="layersPanel" class="panel panel-left" aria-label="Panneau couches">
      <div class="panel-header">
        <h2>Couches</h2>
        <button type="button" class="icon-btn panel-close" data-close-panel="layersPanel" aria-label="Fermer panneau couches">x</button>
      </div>
      <div class="panel-body">
        <div id="layersList"></div>
      </div>
    </aside>

    <aside id="legendPanel" class="panel panel-right" aria-label="Panneau légende">
      <div class="panel-header">
        <h2>Légende</h2>
        <button type="button" class="icon-btn panel-close" data-close-panel="legendPanel" aria-label="Fermer le panneau légende">x</button>
      </div>
      <div class="panel-body">
        <div id="legendContent"></div>
      </div>
    </aside>

    <button id="fabButton" class="fab-button" type="button" aria-label="Actions rapides">+</button>
    <div id="fabMenu" class="fab-menu" aria-label="Menu actions rapides">
      <button type="button" class="fab-item menu-action" data-action="layers">&#x1F9F1; Couches</button>
      <button type="button" class="fab-item menu-action" data-action="legend">&#x1F5FA;&#xFE0F; Légende</button>
      <button type="button" class="fab-item menu-action" data-action="analysis">&#x1F6F0;&#xFE0F; Analyse</button>
      <button type="button" class="fab-item menu-action" data-action="analysis-modal">&#x1F3AF; Analyse avancée</button>
      <button type="button" class="fab-item menu-action" data-action="routing">&#x1F6E3;&#xFE0F; Itinéraire</button>
      <button type="button" class="fab-item menu-action" data-action="measure">&#x1F4CF; Mesure</button>
    </div>

    <div id="analysisModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="analysisTitle">
      <div class="modal-content">
        <div class="panel-header">
          <h2 id="analysisTitle">Analyse avancée</h2>
          <button type="button" class="icon-btn" id="closeAnalysis" aria-label="Fermer analyse">x</button>
        </div>
        <div class="panel-body analysis-form">
          <label>Couche cible
            <select id="analysisLayer">
              <option value="Ecoles">Écoles</option>
              <option value="Localites">Localités</option>
              <option value="Routes">Routes</option>
            </select>
          </label>
          <label>Rayon (mètres)
            <input id="analysisRadius" type="number" min="100" max="50000" step="100" value="5000">
          </label>
          <label>Résultats maximum
            <input id="analysisLimit" type="number" min="1" max="200" step="1" value="25">
          </label>
          <div class="analysis-actions">
            <button id="startAnalysis" type="button" class="icon-btn">Choisir point sur carte</button>
            <button id="clearAnalysis" type="button" class="icon-btn">Nettoyer analyse</button>
          </div>
          <div id="analysisResult" class="analysis-result">Aucun résultat.</div>
        </div>
      </div>
    </div>

    <div id="metadataModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="metadataTitle">
      <div class="modal-content">
        <div class="panel-header">
          <h2 id="metadataTitle">Metadonnées</h2>
          <button type="button" class="icon-btn" id="closeMetadata" aria-label="Fermer les métadonnées">x</button>
        </div>
        <div class="panel-body">
          <p><strong>Projet:</strong> GeoWeb Kaffrine</p>
          <p><strong>Système:</strong> WGS84 (EPSG:4326)</p>
          <p><strong>Couches:</strong> Région, Département, Arrondissement, Routes, Localités, Écoles</p>
        </div>
      </div>
    </div>

    <div id="installToast" class="install-toast" aria-live="polite">
      <span>Installer l'application GeoWeb Kaffrine ?</span>
      <div class="install-actions">
        <button type="button" id="installNow" class="icon-btn">Installer</button>
        <button type="button" id="installLater" class="icon-btn">Plus tard</button>
      </div>
    </div>

    <div id="toastRack" class="toast-rack" aria-live="polite"></div>
    <div id="uiOverlay" class="ui-overlay" aria-hidden="true"></div>
  </div>

  <script src="js/leaflet.js?v=20260222i"></script>
  <script src="js/leaflet-measure.js?v=20260222i"></script>
  <script src="data/Region_3.js"></script>
  <script src="data/Departement_4.js"></script>
  <script src="data/Arrondissement_5.js"></script>
  <script src="data/Routes_6.js"></script>
  <script src="data/Localites_7.js"></script>
  <script src="data/Ecoles_8.js"></script>

  <script src="js/theme.js?v=20260222i"></script>
  <script src="js/map.js?v=20260222i"></script>
  <script src="js/ui.js?v=20260222i"></script>
  <script src="js/app.js?v=20260222i"></script>
</body>
</html>














