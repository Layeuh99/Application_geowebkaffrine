<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#2563eb">
  <title>GeoWeb Kaffrine</title>

  <link rel="stylesheet" href="css/leaflet.css">
  <link rel="stylesheet" href="css/leaflet-measure.css">

  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/layout.css">
  <link rel="stylesheet" href="css/navbar.css">
  <link rel="stylesheet" href="css/mobile.css">
  <link rel="stylesheet" href="css/theme.css">
</head>
<body>
  <div id="app">
    <header class="navbar" role="banner">
      <div class="brand" id="brandHome" role="button" tabindex="0" aria-label="Retour accueil">
        <span class="brand-logo" aria-hidden="true">GK</span>
        <span class="brand-text">GeoWeb Kaffrine</span>
      </div>

      <nav class="desktop-nav" aria-label="Navigation principale">
        <ul class="nav-menu">
          <li class="nav-item dropdown">
            <button class="nav-btn dropdown-toggle" type="button" aria-expanded="false">Navigation</button>
            <div class="dropdown-menu" role="menu">
              <button type="button" class="menu-action" data-action="home">Accueil</button>
              <button type="button" class="menu-action" data-action="metadata">Metadonnees</button>
            </div>
          </li>
          <li class="nav-item dropdown">
            <button class="nav-btn dropdown-toggle" type="button" aria-expanded="false">Donnees</button>
            <div class="dropdown-menu" role="menu">
              <button type="button" class="menu-action" data-action="layers">Couches</button>
              <button type="button" class="menu-action" data-action="legend">Legende</button>
              <button type="button" class="menu-action" data-action="download">Telecharger</button>
            </div>
          </li>
          <li class="nav-item dropdown">
            <button class="nav-btn dropdown-toggle" type="button" aria-expanded="false">Analyse</button>
            <div class="dropdown-menu" role="menu">
              <button type="button" class="menu-action" data-action="analysis">Analyse spatiale</button>
              <button type="button" class="menu-action" data-action="routing">Itineraire</button>
              <button type="button" class="menu-action" data-action="measure">Mesure</button>
            </div>
          </li>
          <li class="nav-item dropdown">
            <button class="nav-btn dropdown-toggle" type="button" aria-expanded="false">Affichage</button>
            <div class="dropdown-menu" role="menu">
              <button type="button" class="menu-action" data-action="zoom-in">Zoom +</button>
              <button type="button" class="menu-action" data-action="zoom-out">Zoom -</button>
              <button type="button" class="menu-action" data-action="full-extent">Vue complete</button>
            </div>
          </li>
        </ul>
      </nav>

      <button id="mobileMenuToggle" class="icon-btn menu-toggle" type="button" aria-label="Ouvrir menu mobile" aria-expanded="false">&#9776;</button>
      <button id="themeToggle" class="icon-btn" type="button" aria-label="Basculer theme">Theme</button>
    </header>

    <aside id="mobileMenu" class="mobile-menu" aria-label="Menu mobile">
      <button type="button" class="menu-action" data-action="home">Accueil</button>
      <button type="button" class="menu-action" data-action="layers">Couches</button>
      <button type="button" class="menu-action" data-action="legend">Legende</button>
      <button type="button" class="menu-action" data-action="analysis">Analyse</button>
      <button type="button" class="menu-action" data-action="routing">Itineraire</button>
      <button type="button" class="menu-action" data-action="measure">Mesure</button>
      <button type="button" class="menu-action" data-action="download">Telecharger</button>
      <button type="button" class="menu-action" data-action="metadata">Metadonnees</button>
    </aside>

    <main class="map-shell">
      <div id="map" aria-label="Carte interactive"></div>
    </main>

    <div class="bottom-bar">
      <span id="statusText">Pret</span>
      <span id="scaleText">Echelle: -</span>
    </div>

    <aside id="layersPanel" class="panel panel-left" aria-label="Panneau couches">
      <div class="panel-header">
        <h2>Couches</h2>
        <button type="button" class="icon-btn panel-close" data-close-panel="layersPanel" aria-label="Fermer panneau couches">x</button>
      </div>
      <div class="panel-body">
        <div id="layersList"></div>
      </div>
    </aside>

    <aside id="legendPanel" class="panel panel-right" aria-label="Panneau legende">
      <div class="panel-header">
        <h2>Legende</h2>
        <button type="button" class="icon-btn panel-close" data-close-panel="legendPanel" aria-label="Fermer panneau legende">x</button>
      </div>
      <div class="panel-body">
        <div id="legendContent"></div>
      </div>
    </aside>

    <button id="fabButton" class="fab-button" type="button" aria-label="Actions rapides">+</button>
    <div id="fabMenu" class="fab-menu" aria-label="Menu actions rapides">
      <button type="button" class="fab-item menu-action" data-action="layers">Couches</button>
      <button type="button" class="fab-item menu-action" data-action="legend">Legende</button>
      <button type="button" class="fab-item menu-action" data-action="analysis">Analyse</button>
      <button type="button" class="fab-item menu-action" data-action="routing">Itineraire</button>
      <button type="button" class="fab-item menu-action" data-action="measure">Mesure</button>
    </div>

    <div id="metadataModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="metadataTitle">
      <div class="modal-content">
        <div class="panel-header">
          <h2 id="metadataTitle">Metadonnees</h2>
          <button type="button" class="icon-btn" id="closeMetadata" aria-label="Fermer metadonnees">x</button>
        </div>
        <div class="panel-body">
          <p><strong>Projet:</strong> GeoWeb Kaffrine</p>
          <p><strong>Systeme:</strong> WGS84 (EPSG:4326)</p>
          <p><strong>Couches:</strong> Region, Departement, Arrondissement, Routes, Localites, Ecoles</p>
        </div>
      </div>
    </div>

    <div id="uiOverlay" class="ui-overlay" aria-hidden="true"></div>
  </div>

  <script src="js/leaflet.js"></script>
  <script src="js/leaflet-measure.js"></script>
  <script src="data/Region_3.js"></script>
  <script src="data/Departement_4.js"></script>
  <script src="data/Arrondissement_5.js"></script>
  <script src="data/Routes_6.js"></script>
  <script src="data/Localites_7.js"></script>
  <script src="data/Ecoles_8.js"></script>

  <script src="js/theme.js"></script>
  <script src="js/map.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
